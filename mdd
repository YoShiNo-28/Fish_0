好，改这个交互很简单，核心就是两点：

1. 按钮永远可点，不再依赖「已选资源」。
2. 弹框打开时，如果没有选中行，就默认不勾选任何资源（`resourceIds: []`）。

下面按你现有代码结构说具体要改哪几处。

---

## 1️⃣ 按钮：永远可点击

现在工具栏右侧有一排按钮，你之前可能是这样写的（参考你现有批量按钮写法）：

```tsx
<button
  className="button button-soft"
  disabled={!hasRowSelection}
  onClick={() => hasRowSelection && openBulkSlice()}
>
  批量添加时间片
</button>
```

改成**不判断选中状态**：

```tsx
<button
  className="button button-soft"
  onClick={openBulkSlice}
>
  批量添加时间片
</button>
```

这样无论有没有勾选资源行，按钮都能点。

---

## 2️⃣ 打开弹框时，默认资源列表不勾选（但有选中行时可以顺带勾上）

`openBulkSlice` 的实现可以写成这样（保留「有选中行就预勾选」的便利性；如果用户啥都没选，就是空数组）：

```tsx
const openBulkSlice = () => {
  setBulkSliceConfig(cfg => ({
    ...cfg,
    resourceIds: selectedRows.length ? [...selectedRows] : [], // 没选时就是 []
    startDate: dateStart,
    endDate: dateStart,
  }));
  setBulkSliceOpen(true);
};
```

* 如果用户先勾选了几条资源，再点「批量添加时间片」，弹框里会帮他把这些资源勾上。
* 如果用户啥也没勾选就点按钮，`selectedRows.length === 0`，`resourceIds` 就是 `[]`，也就是你要的「默认不勾选任何资源」。

弹框里资源那一块我们之前是这么写的（滚动列表 + 多选框），会自动根据 `bulkSliceConfig.resourceIds` 来勾选：

```tsx
{rows.map(r => (
  <label key={r.id} ...>
    <input
      type="checkbox"
      checked={bulkSliceConfig.resourceIds.includes(r.id)}
      onChange={e => {
        const checked = e.target.checked;
        setBulkSliceConfig(cfg => ({
          ...cfg,
          resourceIds: checked
            ? [...cfg.resourceIds, r.id]
            : cfg.resourceIds.filter(id => id !== r.id),
        }));
      }}
    />
    <span>{r.name}</span>
    <span className="text-muted">({r.code})</span>
  </label>
))}
```

所以只要 `resourceIds` 初始是 `[]`，就不会默认勾任何资源。

---

## 3️⃣ 记得把新弹框纳入遮罩/统一关闭（小细节）

你现在控制遮罩和统一关闭的逻辑是这样的：

```tsx
const closeAllLayers = () => {
  setEditingDetail(null);
  setPlanContext(null);
  setRollContext(null);
  setBulkPlanOpen(false);
  setBulkDeleteOpen(false);
};

const anyLayerOpen = !!(
  editingDetail ||
  planContext ||
  rollContext ||
  bulkPlanOpen ||
  bulkDeleteOpen
);
```

加了「批量添加时间片」后，记得把 `bulkSliceOpen` 也加进去：

```tsx
const closeAllLayers = () => {
  setEditingDetail(null);
  setPlanContext(null);
  setRollContext(null);
  setBulkPlanOpen(false);
  setBulkDeleteOpen(false);
  setBulkSliceOpen(false);   // ✅ 新增
};

const anyLayerOpen = !!(
  editingDetail ||
  planContext ||
  rollContext ||
  bulkPlanOpen ||
  bulkDeleteOpen ||
  bulkSliceOpen        // ✅ 新增
);
```

这样点页面灰色遮罩时，这个弹框也会一起被关闭。

---

## 4️⃣ 其他逻辑不用因这个需求再改

* 之前写的 `executeBulkAddSlices` 按日期拆分时间范围、尽量避免跨天时间片的算法可以原样用；
* 即使用户没预先勾选资源，只要在弹框里勾了几个资源，确认后逻辑也完全一样；
* 若用户在弹框里也一个资源都不勾，`resourceIds` 是 `[]`，`executeBulkAddSlices` 里面一开始就可以直接 `setBulkSliceOpen(false); return;`，避免生成无意义数据。

---

如果你愿意，我也可以帮你把：
**现有 App.tsx + 新增状态 + 按钮 + Modal + 执行函数** 合成一个完整版本，方便直接覆盖粘贴。
